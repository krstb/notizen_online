<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Notizen Online</title>
    
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#000000">
    <meta name="color-scheme" content="light dark">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon" href="icon-192.png">

    <script>
      if ('serviceWorker' in navigator) {
        window.addEventListener('load', () => {
          navigator.serviceWorker.register('sw.js');
        });
      }
    </script>

    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');
        
        /* 1. Das System (Hintergrund hinter der App) bleibt schwarz gegen das Blinken */
        html {
            background-color: #000000 !important;
        }

        /* 2. Die eigentliche App-Oberfläche wird wieder hellblau/weiß */
        body {
            font-family: 'Inter', sans-serif;
            background-color: #e0f7fa !important; /* Dein helles Cyan-Blau */
            color: #1e293b;
            min-height: 100vh;
            margin: 0;
        }

        @keyframes pulse-success {
            0% { box-shadow: 0 0 0 0 rgba(8, 145, 178, 0.7); }
            70% { box-shadow: 0 0 0 10px rgba(8, 145, 178, 0); }
            100% { box-shadow: 0 0 0 0 rgba(8, 145, 178, 0); }
        }
        .pulse-success { animation: pulse-success 0.6s cubic-bezier(0.4, 0, 0.6, 1); }
    </style>
</head>
<body class="flex flex-col items-center p-4 md:p-8">

    <div class="w-full max-w-xl bg-white rounded-3xl shadow-xl p-6 md:p-10 mt-10">
        <h1 class="text-4xl md:text-5xl font-extrabold text-center text-slate-900 mb-6">Notizen</h1>

        <div id="authPanelTop" class="text-center mb-6">
            <button id="loginBtn" class="bg-cyan-600 text-white font-semibold py-2 px-6 rounded-xl shadow-md transition-all duration-300 hover:bg-cyan-700 hidden">
                Mit Google anmelden
            </button>
        </div>

        <div id="appContent" class="hidden">
            <form id="noteForm" class="flex flex-col gap-4 mb-8">
                <div class="flex flex-col md:flex-row gap-4">
                     <input type="text" id="noteInput" placeholder="Neue Notiz hier eingeben..."
                           class="flex-1 p-3 rounded-xl border-2 border-slate-200 focus:outline-none focus:border-cyan-500 transition-all duration-300 text-slate-800 text-lg shadow-sm">
                     <select id="priorityInput" class="p-3 rounded-xl border-2 border-slate-200 focus:outline-none focus:border-cyan-500 transition-all duration-300 text-slate-800 text-lg shadow-sm bg-white">
                        <option value="1" selected>Niedrig</option>
                        <option value="2">Mittel</option>
                        <option value="3">Hoch</option>
                    </select>
                </div>
                <button type="submit" class="w-full bg-cyan-600 text-white font-semibold py-3 px-8 rounded-xl shadow-md transition-all duration-300 transform hover:scale-105 active:scale-95 hover:bg-cyan-700 bg-gradient-to-r from-cyan-500 to-cyan-700 hover:from-cyan-600 hover:to-cyan-800">
                    Hinzufügen
                </button>
            </form>
    
            <div id="notesContainer" class="space-y-4">
                <p id="loadingMessage" class="text-center text-slate-500">Notizen werden geladen...</p>
            </div>
    
            <button id="exportCsvBtn" class="w-full bg-slate-200 text-slate-700 font-semibold py-3 px-8 rounded-xl shadow-md transition-all duration-300 transform hover:scale-105 active:scale-95 hover:bg-slate-300 mt-8">
                Notizen als CSV exportieren
            </button>
            
            <div id="authFooter" class="mt-8 pt-4 border-t border-slate-200 text-center">
                <p id="authStatus" class="text-slate-600 mb-3 text-sm font-medium">Angemeldet als...</p>
                 <button id="logoutBtn" class="w-full bg-red-500 text-white font-semibold py-2 px-6 rounded-xl shadow-md transition-all duration-300 hover:bg-red-600">
                    Abmelden
                 </button>
            </div>
        </div>
    </div>

    <script type="module">
        // ... (Der restliche Firebase-Teil von oben bleibt unverändert) ...
    </script>
</body>
</html>
